<div  class="historic-container">
    <button  pButton  label='{{ "createdata" | translate }}' (click) = "createFormDialog()" icon="pi pi-plus" class="mr-2 p-button-sm purple-button"></button>
    <div class="d-table">
        <p-table class="history-table purple-table"
            dataKey="id"
            [value]="meterHistoric" 
            [loading]="isLoading"
            [lazy]="true"
            (onLazyLoad)="loadHistoricLazy($event)"
            [paginator]="true" 
            [rows]="rowsNumber" 
            [(first)]="first" 
            styleClass="p-datatable-sm p-datatable-striped" 
            [tableStyle]="{'min-width': '20rem'}"
            [rowHover]="true"
            [totalRecords]="totalRecords"
            [globalFilterFields]="['value','date']">   
            
            <ng-template pTemplate="header" class="table-header">
                <tr>               
                    <th  pSortableColumn="value">{{ "value" | translate }} <p-sortIcon field="value"></p-sortIcon></th>    
                    <th pSortableColumn="date">Date <p-sortIcon field="date"></p-sortIcon></th>   
                    <th *ngIf = "isAdmin()"></th>      
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-history >
                <tr class="table-row">
                    <td>{{history.value}}</td> 
                    <td>{{history.date}}</td> 
                    <td class="actions-column" *ngIf = "isAdmin()">
                        <button (click)="editFormDialog(history)" pButton icon="pi pi-pencil" class="btn p-button-rounded p-button-outlined p-button-secondary mr-2 p-button-sm"></button>
                        <button (click)="deleteMeterHistory(history.id)" pButton icon="pi pi-trash" class="btn p-button-rounded p-button-outlined p-button-danger p-button-sm"></button>
                    </td>           
                </tr>
            </ng-template>
        </p-table>
        <!--Dialogs-->
        <p-confirmDialog class="purple-confirmdialog" key="deleteDialog" header="Delete confirmation" icon="pi pi-exclamation-triangle"></p-confirmDialog>
    </div>
</div>
